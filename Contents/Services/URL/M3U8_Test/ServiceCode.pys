#!/usr/bin/env python

"""m3u8.test Service Code"""

####################################################################################################
def MetadataObjectForURL(url):

    return VideoClipObject(
        title=get_url(url),
        thumb='http://i.imgur.com/75YO83o.jpg',
        source_title='m3u8.test'
        )

####################################################################################################
@deferred
def MediaObjectsForURL(url):

    return [
        MediaObject(
            audio_channels=2,
            optimized_for_streaming=True,
            parts=[
                PartObject(
                    key=HTTPLiveStreamURL(get_url(url))
                    )
                ]
            )
        ]

####################################################################################################
def get_url(url):
    return D(url.split('m3u8.test://')[1])
